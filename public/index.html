<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>We meet</title>
<link href="/index.css" rel="stylesheet" type="text/css">

</head>
<body>


<div id="mainLayout">

<div id="calendarContainer" style="display: none;">
  <h3>Meeting Calendar</h3>
  <input type="date" id="reminderDate">
  <input type="text" id="reminderMsg" placeholder="Enter reminder message">
  <button id="setReminderBtn" type="button">â¡ï¸</button>
</div>


<div id="chatContainer">

  <h3>Chat Here!</h3>
  <div id="chatBox">
    <div id="messages"></div>
    <div id="chatInputContainer">
      <input id="chatInput" type="text" placeholder="Type a message..." autocomplete="off">
      <div id="typingIndicator"></div>        
      <button id="sendBtn">Send</button>
    </div>
  </div>

<div class="custom-file">
  <input type="file" id="fileInput">
  <label for="fileInput">ğŸ“¤</label>
</div>  <button id="sendFileBtn">Send File</button>

</div>


<div id="rightPanel">
  
  <div id="videoContainer">
    <div id="mainVideoContainer">
      <video id="mainVideo" autoplay playsinline muted></video>

      <div id="sideThumbnails">
        <video id="localVideo" class="thumbnail" autoplay muted playsinline></video>
        <video id="remoteVideo" class="thumbnail" autoplay playsinline></video>
        <video id="sharedScreen" class="thumbnail" autoplay playsinline muted></video>
        <video id="remoteScreen" class="thumbnail" autoplay playsinline muted></video>
      </div>
    </div>
  </div>
  <div id="controls">

<div id="participantWrapper">
<button id="participantToggleBtn" title="Participants">ğŸ‘¥</button>

  <ul id="participantList"></ul>
</div>

<input id="roomId" placeholder="Meeting ID" class="form-input" />
<input id="username" placeholder="Enter your name" class="form-input" />

    <button id="startBtn" title="Start Meeting">â–¶ï¸ </button>
    <button id="joinBtn" title="Join Meeting">ğŸ”—</button>

  <button id="moreReactionsBtn" title="More Reactions">ğŸ‘</button>
<button id="openChatBtn" title="Open Chat">ğŸ’¬</button>


<div id="emojiPopup" class="popup">
  <div class="popup-content">
    <span id="closePopup">&times;</span>
    <div id="extraReactions">
        <button>ğŸ‘</button>
  <button>ğŸ˜‚</button>
  <button>â¤ï¸</button>
      <button>ğŸ˜</button>
      <button>ğŸ¥³</button>
      <button>ğŸ˜¢</button>
      <button>ğŸ¤”</button>
      <button>ğŸ™Œ</button>
      <button>ğŸ”¥</button>
      <button>ğŸ’¯</button>
      <button>ğŸŒŸ</button>
    </div>
  </div>
</div>
    

<button id="cameraToggleBtn" title="Toggle Camera">ğŸ¥</button>
<button id="screenToggleBtn" title="Toggle Screen">ğŸ–¥ï¸</button>

<button id="recordMainBtn" title="Recording Options">ğŸï¸</button>

<div id="recordPopup" class="record-popup">
  <div class="record-popup-content">
    <button id="startRecord">â–¶ï¸ Start</button>
    <button id="stopRecord">ğŸ”´ Stop</button>
    <button id="uploadRecord">ğŸ“¤ Upload</button>
    <button id="closeRecordPopup">âŒ</button>
  </div>
</div>

<button id="muteButton" title="Mute / Unmute">ğŸ¤</button>

    <button id="leaveCallBtn" title="Leave Call">ğŸ“</button>
<button id="endCallBtn" title="End Call">âŒ</button>
<button id="themeToggle" title="Change Mode">ğŸŒ™</button>

<button id="raiseHandBtn" title="Raise Hand">ğŸ™‹</button>

<button id="eventBtn" type="button" title="Calendar">ğŸ“…</button>
<button id="activityBtn" title="Check Logs">ğŸ“</button>

<div id="participantsWrapper">
  <h3>Room Activities</h3>
  <div id="participants"></div>
</div>

  <p id="status"></p>

<div id="notificationss"></div>

</div>
  </div>
</div>

  
  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="main.js"></script>

  <script>

window.addEventListener('DOMContentLoaded', () => {
  const roomInput = document.getElementById('roomId');
  const nameInput = document.getElementById('username');
  const savedId = localStorage.getItem('generatedMeetingId');
  const savedUser = JSON.parse(localStorage.getItem('loggedInUser'));

  if (savedId && roomInput) {
    roomInput.value = savedId;
    localStorage.removeItem('generatedMeetingId');
  }

  if (savedUser && nameInput) {
    nameInput.value = savedUser.username;  // or .name if your backend uses that
  }
});



const mainVideo = document.getElementById('mainVideo');
const thumbnails = document.querySelectorAll('.thumbnail');

thumbnails.forEach(thumb => {
  thumb.addEventListener('click', () => {
    const tempStream = mainVideo.srcObject;
    mainVideo.srcObject = thumb.srcObject;
    thumb.srcObject = tempStream;

    const tempMuted = mainVideo.muted;
    mainVideo.muted = thumb.muted;
    thumb.muted = tempMuted;
  });
});



const themeToggle = document.getElementById("themeToggle");

if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark-mode");
  themeToggle.textContent = "â˜€ï¸";
}

themeToggle.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");

  if (document.body.classList.contains("dark-mode")) {
    themeToggle.textContent = "â˜€ï¸";
    localStorage.setItem("theme", "dark");
  } else {
    themeToggle.textContent = "ğŸŒ™";
    localStorage.setItem("theme", "light");
  }
});



const eventBtn = document.getElementById("eventBtn");
const calendarContainer = document.getElementById("calendarContainer");

eventBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  calendarContainer.style.display =
    calendarContainer.style.display === "block" ? "none" : "block";
});

calendarContainer.addEventListener("click", (e) => {
  e.stopPropagation();
});




function showMeetingStarted() {
  const popup = document.getElementById("meetingStartPopup");

  popup.classList.add("show");

  setTimeout(() => {
    popup.classList.remove("show");
  }, 2500); 
}
  </script>


<div id="meetingStartPopup">Start your Meeting</div>

</body>
</html>
